import{r as t,j as e,a as k}from"./app-D5IJSCvg.js";import{M as d,T as N}from"./TextInput-Ub2rYonD.js";import{B as u}from"./Button-D40j8xhE.js";import{T as S}from"./TextArea-D_xG-DAP.js";import{I as h}from"./ImagePreviewInput-CBGWkbo8.js";import{a as C}from"./Api-DcJJrnSJ.js";function O(){const[p,x]=t.useState(null),[i,g]=t.useState(""),[l,f]=t.useState(""),[n,j]=t.useState(null),[v,r]=t.useState(!1),[m,b]=t.useState(!1),c=s=>{const a=s.target.files[0];if(a){const o=new FileReader;o.onloadend=()=>{j(o.result)},o.readAsDataURL(a),x(a)}},w=async s=>{s.preventDefault();try{const a=new FormData;a.append("gambar",p),a.append("nama",i),a.append("deskripsi",l),await k.post(`${C}tambahblog`,a,{headers:{"Content-Type":"multipart/form-data"}}),b(!0)}catch(a){a.response&&(alert("Data gagal dimasukkan"),window.location.reload())}};return e.jsxs("div",{children:[m&&e.jsx("div",{className:"relative w-[300px] h-screen mt-32",children:e.jsxs(d,{children:[e.jsx("h1",{className:"text-xs text-center",children:"Data berhasil dimasukan"}),e.jsx("div",{onClick:()=>window.location.reload(),className:"text-center mt-5",children:e.jsx(u,{className:"w-32",children:"ok"})})]})}),e.jsx(d,{children:e.jsxs("form",{onSubmit:w,className:`flex flex-col ${m?"hidden":"block"}`,content:"",children:[e.jsx("div",{className:`${n?"hidden":"block"}`,children:e.jsx(h,{type:"file",nama:"gambar",onChange:c})}),n&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:n,alt:"Preview",className:"mt-2 rounded-lg w-[300px] h-[250px] object-cover shadow-lg",onMouseOver:()=>r(!0),onMouseOut:()=>r(!1)}),e.jsx("div",{onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),children:e.jsx("div",{className:`absolute -top-4 bg-white rounded-lg ${v?"block":"hidden"}`,children:e.jsx(h,{nama:"gambar",onChange:c})})})]}),e.jsx(N,{type:"text",name:"nama",value:i,onChange:s=>g(s.target.value),placeholder:"Nama",minLength:5,maxLength:25,required:!0}),e.jsx(S,{type:"text",name:"deskripsi",value:l,onChange:s=>f(s.target.value),placeholder:"Deskripsi",minLength:5,maxLength:100,required:!0}),e.jsx(u,{children:"Submit"})]})})]})}export{O as default};
