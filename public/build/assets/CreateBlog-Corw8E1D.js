import{r as s,j as e,a as k}from"./app-DIXEbt7d.js";import{M as m,T as N}from"./TextInput-DYLcJunQ.js";import{B as u}from"./Button-DVWaxQgd.js";import{T as S}from"./TextArea-BbNF39jT.js";import{I as h}from"./ImagePreviewInput-Bes5QOkE.js";function L(){const[x,p]=s.useState(null),[i,g]=s.useState(""),[l,f]=s.useState(""),[r,j]=s.useState(null),[v,n]=s.useState(!1),[c,b]=s.useState(!1),d=t=>{const a=t.target.files[0];if(a){const o=new FileReader;o.onloadend=()=>{j(o.result)},o.readAsDataURL(a),p(a)}},w=async t=>{t.preventDefault();try{const a=new FormData;a.append("gambar",x),a.append("nama",i),a.append("deskripsi",l),await k.post("http://127.0.0.1:8000/tambahblog",a,{headers:{"Content-Type":"multipart/form-data"}}),b(!0)}catch(a){a.response&&(alert("Data gagal dimasukkan"),window.location.reload())}};return e.jsxs("div",{children:[c&&e.jsx("div",{className:"relative w-[300px] h-screen mt-32",children:e.jsxs(m,{children:[e.jsx("h1",{className:"text-xs text-center",children:"Data berhasil dimasukan"}),e.jsx("div",{onClick:()=>window.location.reload(),className:"text-center mt-5",children:e.jsx(u,{className:"w-32",children:"ok"})})]})}),e.jsx(m,{children:e.jsxs("form",{onSubmit:w,className:`flex flex-col ${c?"hidden":"block"}`,content:"",children:[e.jsx("div",{className:`${r?"hidden":"block"}`,children:e.jsx(h,{type:"file",nama:"gambar",onChange:d})}),r&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r,alt:"Preview",className:"mt-2 rounded-lg w-[300px] h-[250px] object-cover shadow-lg",onMouseOver:()=>n(!0),onMouseOut:()=>n(!1)}),e.jsx("div",{onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),children:e.jsx("div",{className:`absolute -top-4 bg-white rounded-lg ${v?"block":"hidden"}`,children:e.jsx(h,{nama:"gambar",onChange:d})})})]}),e.jsx(N,{type:"text",name:"nama",value:i,onChange:t=>g(t.target.value),placeholder:"Nama",minLength:5,maxLength:25,required:!0}),e.jsx(S,{type:"text",name:"deskripsi",value:l,onChange:t=>f(t.target.value),placeholder:"Deskripsi",minLength:5,maxLength:100,required:!0}),e.jsx(u,{children:"Submit"})]})})]})}export{L as default};
