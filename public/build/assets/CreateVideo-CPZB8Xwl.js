import{r as t,j as e,a as w}from"./app-D5IJSCvg.js";import{M as c,T as k}from"./TextInput-Ub2rYonD.js";import{B as u}from"./Button-D40j8xhE.js";import{T as N}from"./TextArea-D_xG-DAP.js";import{I as S}from"./ImagePreviewInput-CBGWkbo8.js";import{a as C}from"./Api-DcJJrnSJ.js";function O(){const[x,h]=t.useState(null),[i,p]=t.useState(""),[l,g]=t.useState(""),[n,f]=t.useState(null),[j,r]=t.useState(!1),[m,v]=t.useState(!1),d=s=>{const a=s.target.files[0];if(a){const o=new FileReader;o.onloadend=()=>{f(o.result)},o.readAsDataURL(a),h(a)}},b=async s=>{s.preventDefault();try{const a=new FormData;a.append("gambar",x),a.append("nama",i),a.append("deskripsi",l),await w.post(`${C}tambahvideo`,a,{headers:{"Content-Type":"multipart/form-data"}}),v(!0)}catch(a){a.response&&(alert("Data gagal dimasukkan"),window.location.reload())}};return e.jsxs("div",{children:[m&&e.jsx("div",{className:"relative w-[300px] h-screen mt-32",children:e.jsxs(c,{children:[e.jsx("h1",{className:"text-xs text-center",children:"Data berhasil dimasukan"}),e.jsx("div",{onClick:()=>window.location.reload(),className:"text-center mt-5",children:e.jsx(u,{className:"w-32",children:"ok"})})]})}),e.jsx(c,{children:e.jsxs("form",{onSubmit:b,className:`flex flex-col ${m?"hidden":"block"}`,content:"",children:[e.jsxs("div",{className:`${n?"hidden":"block"}`,children:[e.jsx("label",{htmlFor:"gambar",children:e.jsx("img",{src:"gallery.png",alt:"",className:"w-[250px] mx-auto"})}),e.jsx("input",{type:"file",nama:"gambar",id:"gambar",onChange:d,className:"hidden"})]}),n&&e.jsxs("div",{className:"relative",children:[e.jsx("video",{src:n,alt:"Preview",className:"mt-2 rounded-lg w-[300px] h-[250px] object-cover shadow-lg",onMouseOver:()=>r(!0),onMouseOut:()=>r(!1)}),e.jsx("div",{onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),children:e.jsx("div",{className:`absolute -top-4 bg-white rounded-lg ${j?"block":"hidden"}`,children:e.jsx(S,{nama:"gambar",onChange:d})})})]}),e.jsx(k,{type:"text",name:"nama",value:i,onChange:s=>p(s.target.value),placeholder:"Nama",minLength:5,maxLength:25,required:!0}),e.jsx(N,{type:"text",name:"deskripsi",value:l,onChange:s=>g(s.target.value),placeholder:"Deskripsi",minLength:5,maxLength:50,required:!0}),e.jsx(u,{children:"Submit"})]})})]})}export{O as default};
